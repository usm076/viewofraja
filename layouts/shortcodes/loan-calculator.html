<div class="calculator-container loan-calculator" itemscope itemtype="https://schema.org/WebApplication" style="background: var(--bg-secondary, #f8f9fa); padding: 20px; border-radius: 8px; margin: 20px 0; border: 1px solid var(--border-color, #e9ecef); color: var(--text-primary, #333);">
  <h3 style="margin-top: 0; color: var(--text-primary, #2c3e50);" itemprop="name">ðŸ’° Loan & EMI Calculator</h3>
  <meta itemprop="description" content="Calculate monthly loan payments, total interest, and amortization schedule for mortgages, auto loans, and personal loans">
  <meta itemprop="applicationCategory" content="FinanceApplication">
  
  <div class="calculator-inputs" style="display: grid; gap: 15px; margin-bottom: 20px;">
    <div>
      <label for="loanAmount" style="display: block; font-weight: bold; margin-bottom: 5px;">Loan Amount ($)</label>
      <input type="number" id="loanAmount" placeholder="250000" style="width: 100%; padding: 10px; border: 1px solid var(--border-color, #ddd); border-radius: 4px; background: var(--bg-primary, white); color: var(--text-primary, #333);">
    </div>
    
    <div>
      <label for="interestRate" style="display: block; font-weight: bold; margin-bottom: 5px;">Annual Interest Rate (%)</label>
      <input type="number" id="interestRate" placeholder="6.5" step="0.1" style="width: 100%; padding: 10px; border: 1px solid var(--border-color, #ddd); border-radius: 4px; background: var(--bg-primary, white); color: var(--text-primary, #333);">
    </div>
    
    <div>
      <label for="loanTerm" style="display: block; font-weight: bold; margin-bottom: 5px;">Loan Term (Years)</label>
      <input type="number" id="loanTerm" placeholder="30" style="width: 100%; padding: 10px; border: 1px solid var(--border-color, #ddd); border-radius: 4px; background: var(--bg-primary, white); color: var(--text-primary, #333);">
    </div>
    
    <button onclick="calculateLoan()" style="background: #3498db; color: white; padding: 12px 20px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">Calculate EMI</button>
  </div>
  
  <div id="loanResults" style="display: none;">
    <div style="background: var(--bg-primary, white); padding: 15px; border-radius: 6px; border-left: 4px solid #27ae60;">
      <h4 style="margin-top: 0; color: #27ae60;">ðŸ“Š Calculation Results</h4>
      <div style="display: grid; gap: 10px; color: var(--text-primary, #333);">
        <div><strong style="color: var(--text-primary, #333);">Monthly EMI:</strong> <span id="monthlyEMI" style="color: #e74c3c; font-size: 1.2em;"></span></div>
        <div><strong style="color: var(--text-primary, #333);">Total Amount Payable:</strong> <span id="totalAmount" style="color: var(--text-primary, #333);"></span></div>
        <div><strong style="color: var(--text-primary, #333);">Total Interest:</strong> <span id="totalInterest" style="color: var(--text-primary, #333);"></span></div>
        <div><strong style="color: var(--text-primary, #333);">Principal:</strong> <span id="principalAmount" style="color: var(--text-primary, #333);"></span></div>
      </div>
    </div>
  </div>
</div>

<script>
function calculateLoan() {
  const principal = parseFloat(document.getElementById('loanAmount').value);
  const annualRate = parseFloat(document.getElementById('interestRate').value);
  const years = parseFloat(document.getElementById('loanTerm').value);
  
  if (!principal || !annualRate || !years) {
    alert('Please fill in all fields');
    return;
  }
  
  const monthlyRate = annualRate / 100 / 12;
  const numPayments = years * 12;
  
  // EMI calculation using formula: EMI = P * r * (1+r)^n / ((1+r)^n - 1)
  const emi = principal * monthlyRate * Math.pow(1 + monthlyRate, numPayments) / (Math.pow(1 + monthlyRate, numPayments) - 1);
  
  const totalAmount = emi * numPayments;
  const totalInterest = totalAmount - principal;
  
  // Display results
  document.getElementById('monthlyEMI').textContent = '$' + emi.toFixed(2);
  document.getElementById('totalAmount').textContent = '$' + totalAmount.toFixed(2);
  document.getElementById('totalInterest').textContent = '$' + totalInterest.toFixed(2);
  document.getElementById('principalAmount').textContent = '$' + principal.toFixed(2);
  
  document.getElementById('loanResults').style.display = 'block';
}
</script>
